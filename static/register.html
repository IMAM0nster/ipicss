<!DOCTYPE html>
<html>
<head>
<title>Home</title>
<link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="js/jquery.min.js"></script>
<!-- Custom Theme files -->
<!--theme-style-->
<link href="css/style.css" rel="stylesheet" type="text/css" media="all" />	
<!--//theme-style-->
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="Sport Responsive web template, Bootstrap Web Templates, Flat Web Templates, Andriod Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyErricsson, Motorola web design" />
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<!--fonts-->
<link href='http://fonts.useso.com/css?family=Open+Sans:400,300,600,700,800' rel='stylesheet' type='text/css'>
<!--//fonts-->

</head>
<body> 
<!--header-->
	<div class="line">
	
	</div>
	<div class="header">
		<div class="logo">
			<a href="index.html"><img src="images/logo.png" alt="" ></a>
		</div>
		<div  class="header-top">
			<div class="header-grid">
				<ul class="header-in">
						<li ><a href="account.html">我的账户   </a> </li>					
					</ul>
					<div class="search-box">
					    <div id="sb-search" class="sb-search">
							<form>
								<input class="sb-search-input" placeholder="Enter your search term..." type="search" name="search" id="search">
								<input class="sb-search-submit" type="submit" value="" method="PUT" action="/search/">
								<span class="sb-icon-search"> </span>
							</form>
						</div>
				    </div>
					<!-- search-scripts -->
					<script src="js/classie.js"></script>
					<script src="js/uisearch.js"></script>
						<script>
							new UISearch( document.getElementById( 'sb-search' ) );
						</script>
					<!-- //search-scripts -->
					<div class="online">
					<a href="cart.html" >购物车</a>
					</div>
					<div class="clearfix"> </div>
			</div>
			<div class="header-bottom">
				<div class="h_menu4"><!-- start h_menu4 -->
				<a class="toggleMenu" href="#">Menu</a>
				<ul class="nav">
					<li><a href="product.html">药物查询</a></li>		
					<li><a href="product.html">出诊预约</a>	
					</li>
					<li><a href="product.html">更多 <i> </i></a>
						<ul>
							<li><a href="contact.html">联系我们</a></li>
							<li><a href="account.html">我的账号</a></li>
							<li><a href="register.html">注册</a></li>
						</ul>
					</li>
				</ul>
				<script type="text/javascript" src="js/nav.js"></script>
			</div><!-- end h_menu4 -->
					<ul class="header-bottom-in">
						<li ><select class="drop">
							  <option value="Dollars" class="in-of">Get Active</option>
							  <option value="Euro" class="in-of">Get Active1</option>
							  <option value="Yen" class="in-of">Get Active2</option>
							</select> </li>
						<li ><select class="drop">
							  <option value="Dollars" class="in-of">Community</option>
							  <option value="Euro" class="in-of">Community1</option>
							  <option value="Yen" class="in-of">Community2</option>
							</select></li>		
					</ul>
			<div class="clearfix"> </div>
		</div>
		</div>
		<div class="clearfix"> </div>
	</div>
	<!---->	
<div class="container">
		<div class="register">
		<h2>用户注册</h2>		
		<div class=" register-top">
			<form name="form1">
				<div> 	
				<span id="UN" >昵称</span>
				<input type="text" name="UserName"   size="12" maxlength="12" onblur="UserName_onblur()"> 
			</div>
			<div> 	
				<span id="EA">电子邮箱</span>
				<input type="text" name="EmailAddress" onblur="EmailAddress_onblur()"> 
			</div>
			<div> 
			  <span id="P">密码</span>
				<input type="password" name="Password"  size="12" maxlength="12">
			</div>		
            <div> 
			  <span id="CP">确认密码</span>
			  <input type="password" name="ConfirmPassword"  onblur="ConfirmPassword_onblur()" size="12" maxlength="20">
			</div>
            <span id="CB">请阅读<a herf="">用户协议</a></span>
        <label class="checkbox">
          <input type="checkbox" name="checkbox">
          <i> </i>我同意用户协议</label>		
			  <input type="button" value="提交" onblur="ConfirmPassword_onblur()" onclick="btnCheckForm_onclick()"> 
			</form>
		</div>		
	</div>
	</div>

	<!---->
<!--footer-->
	<div class="footer">
		<div class="col-md-3 footer-left">
			<h4>常见疾病</h4>
			<div class="run-top">
				<ul class="run-grid">
					<li><a href="product.html">感冒</a></li>
					<li><a href="product.html">胃痛</a></li>
					<li><a href="product.html">消化不良</a></li>
					<li><a href="product.html">失眠</a></li>
					<li><a href="product.html">缺钙</a></li>
					<li><a href="product.html">其他</a></li>
				</ul>
				<ul class="run-grid">
					<li><a href="product.html">头痛</a></li>
					<li><a href="product.html">营养不良</a></li>
					<li><a href="product.html">维生素缺乏</a></li>
				</ul>
			<div class="clearfix"> </div>
			</div>
		</div>
		<div class="col-md-3 footer-left left-footer">
			<h4>最新</h4>
			<div class="run-top top-run">
				<ul class="run-grid">
					<li><a href="#">新闻</a></li>
					<li><a href="#">活动</a></li>
					<li><a href="#">视频</a></li>
					<li><a href="#">促销</a></li>
				</ul>
				<ul class="run-grid">
					<li><a href="#">新闻</a></li>
					<li><a href="#">活动</a></li>
					<li><a href="#">视频</a></li>
					<li><a href="#">促销</a></li>
				</ul>
			<div class="clearfix"> </div>
			</div>
		</div>
		<div class="col-md-2 footer-left left-footer">
			<h4>我的账户</h4>
				<ul class="run-grid-in">
					<li><a href="account.html">请登陆</a></li>
				</ul>
                <div class="clearfix"> </div>
		</div>
		<div class="col-md-4 footer-left left-footer">
			<ul class="social-in">
				<li><a href="#"><i> </i></a></li>
				<li><a href="#"><i class="youtube"> </i></a></li>
				<li><a href="#"><i class="facebook"> </i></a></li>
				<li><a href="#"><i class="twitter"> </i></a></li>
			</ul>
	    <div class="letter">

			</div>
			
		</div>
		<div class="clearfix"> </div>
	</div>
<script>
function HttpRequest(url, callback)
{
	this.request=new XMLHttpRequest();
	this.request.open("GET",url);
	
	var tempRequest=this.request;
	
	function reqReadyStateChange(){
		if (tempRequest.readyState==4){
			if (tempRequest.status == 200){
			    callback(tempRequest.responseText);
				}else{alert("无法连接到服务器！status:"+tempRequest.status+" readyState:"+tempRequest.readyState);}
			}
	}
	this.request.onreadystatechange=reqReadyStateChange;
}

HttpRequest.prototype.send=function(){
	this.request.send(null);
}
</script>
<script>
function btnCheckForm_onclick()
{
	var	myForm = document.form1;
	var flag = 1;

		if  (myForm.ConfirmPassword.value == "")
		{
			document.getElementById('CP').innerText ="再次输入密码(不能为空！)";
			document.all('CP').style.color="#ff0000";
			myForm.ConfirmPassword.focus();
		}
		else
		{
			document.getElementById('CP').innerText ="再次输入密码";
			document.all('CP').style.color="#b2b2b2";
		}

		if  (myForm.Password.value == "")
		{
			document.getElementById('P').innerText ="密码(不能为空！)";
			document.all('P').style.color="#ff0000";
			myForm.Password.focus();
		}
		else
		{
			document.getElementById('P').innerText ="密码";
			document.all('P').style.color="#b2b2b2";
		}

		if  (myForm.EmailAddress.value == "")
		{
			document.getElementById('EA').innerText ="邮箱地址(不能为空！)";
			document.all('EA').style.color="#ff0000";
			myForm.EmailAddress.focus();
		}
		else
		{
			document.getElementById('EA').innerText ="邮箱地址";
			document.all('EA').style.color="#b2b2b2";
		}

		if  (myForm.UserName.value == "")
		{
			document.getElementById('UN').innerText ="用户名称(不能为空！)";
			document.all('UN').style.color="#ff0000";
			myForm.UserName.focus();
		}
		else
		{
			document.getElementById('UN').innerText ="用户名";
			document.all('UN').style.color="#b2b2b2";
		}
	if (myForm.UserName.value == "" || myForm.EmailAddress.value == "" || myForm.Password.value == "" || myForm.ConfirmPassword.value == ""  )
	{
		flag=0;
	}
	else
	{
		var Un = document.form1.UserName;
		var myRegExp = /[a-zA-Z_0-9]{4,30}$/i;
		if (myRegExp.test(Un.value)==false)
		{
			document.getElementById('UN').innerText ="用户名（4-30位，只能输入字母数字和下划线）";
			document.all('UN').style.color="#ff0000";
			Un.focus();
			flag = 0;
		}
		else
		{
			document.getElementById('UN').innerText ="用户名";
			document.all('UN').style.color="#b2b2b2";
		}
		var EA = document.form1.EmailAddress
		var myRegExp = /^([^<>()\[\],;:@"\x00-\x20\x7F]|\\.)+@(([a-z]|#\d+?)([a-z0-9]|#\d+?)*([a-z0-9]|#\d+?)\.)+([a-z]{2,4})$/i;
		if (myRegExp.test(EA.value)==false)
		{
			document.getElementById('EA').innerText ="邮箱地址（请输入正确的邮箱地址）";
			document.all('EA').style.color="#ff0000";
			EA.focus();
			flag = 0;
		}
		else
		{
			document.getElementById('EA').innerText ="邮箱地址";
			document.all('EA').style.color="#b2b2b2";
		}
		var Pw = document.form1.Password;
		var myRegExp = /[a-zA-Z_0-9]{6,20}$/i;
		if (myRegExp.test(Pw.value)==false)
		{
			document.getElementById('P').innerText ="密码（请输入6~20位数字和字母）";
			document.all('P').style.color="#ff0000";
			Pw.focus();
			flag = 0;
		}
		else
		{
			document.getElementById('P').innerText ="密码";
			document.all('P').style.color="#b2b2b2";
		}
		var FN = document.form1.ConfirmPassword;
		var FN1 = document.form1.Password.value;
		if (FN.value!=FN1)
		{
			document.getElementById('CP').innerText ="请再一次输入相同的密码";
			document.all('CP').style.color="#ff0000";
			FN.focus();
			flag = 0;
		}
		else
		{
			document.getElementById('CP').innerText ="再次输入密码";
			document.all('CP').style.color="#b2b2b2";
		}
		var CBox=document.form1.checkbox;
		if (!(CBox.checked))
		{
		    document.getElementById('CB').innerText ="是否同意用户协议？";
			document.all('CB').style.color="#ff0000";
			CBox.focus();
			flag=0;
	    }
	if (flag==1)
	{
		myForm.submit()
	}
}}

function  UserName_onblur(){
    var username = document.form1.UserName.value;
	if (username)
	{
		document.getElementById('UN').innerText ="昵称（请稍等，正在检查）";
		var url = "check?username="+username;
		var request= new HttpRequest(url, handleChkRe);
		request.send();
		
	}
}

function  EmailAddress_onblur(){
    var emailaddress = document.form1.EmailAddress.value;
	if (emailaddress)
	{
		document.getElementById('EA').innerText ="电子邮箱（请稍等，正在检查）";
		var url = "check?emailaddress="+emailaddress;
		var request= new HttpRequest(url, handleChkRe);
		request.send();
		
}
}

function handleChkRe(responseJSON){
	var response=JSON.parse(responseJSON);
	if (response.id==1)
	    {
			if (response.avaliable)
			{
				document.getElementById('UN').innerText ="昵称（可以使用）";
			}
			else
			{
				document.getElementById('UN').innerText ="昵称（已被占用）";
				document.getElementById('UN').style.color="#ff0000";}
		}
	elif (response.id==2)
	    {
			if(response.avaliable)
			{
				document.getElementById('EA').innerText ="电子邮箱（可以使用）";
			}
			else
			{
				document.getElementById('EA').innerText ="电子邮箱（已被占用）";
				document.getElementById('EA').style.color="#ff0000";}
		}
	}


function ConfirmPassword_onblur()
{
	var FN = document.form1.ConfirmPassword;
	var FN1 = document.form1.Password.value;
	if (FN.value!=FN1)
	{
		document.getElementById('CP').innerText ="请再一次输入相同的密码";
		document.all('CP').style.color="#ff0000";
	}
	else
		{
			document.getElementById('CP').innerText ="再次输入密码";
			document.all('CP').style.color="#b2b2b2";
		}
}
</script> 
</body>
</html>